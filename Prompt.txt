【状況】
スマホ版 battle 画面の最新修正版を確認。まだ不具合＋要件未達があります。
※①②はスマホのみ修正（PCに影響NG）。③はPC/スマホ両方で修正してください。

【① デグレ：左右キャラクターエリアが狭くなった（スマホのみ）】
前の状態より左右のキャラクター情報パネル（left/right panel）が細くなって、内容が窮屈になっています。
スマホ用CSSで left/right panel の幅が縮んでいる変更が入っているはずなので、
「狭まる前の幅」に戻して、PC表示には影響しない形にしてください。
（※スマホ用メディアクエリ内の width/padding 変更が原因の可能性高）

【② 盤面サイズが変わってない（スマホのみ）】
中央の boardWrap/盤面の“体感サイズ”が、相変わらず以前とほぼ同じで小さいままです。
スマホでは「縦方向の空き」をもっと盤面に割り当てて、
盤面（投下エリア含む）が画面内で最大化されるようにしてください。

要件（スマホ）：
- boardWrap が画面の縦幅ギリギリまで使う（欠けない範囲で最大化）
- それに合わせて横も可能な限り最大化
- 左右パネルと中央盤面の隙間を減らし、中央を“使い切る”

ヒント：
- 現状は scale 計算の縦基準（vh/baseHeight）がボトルネックになって盤面が縮み続けている可能性が高いです。
- 「固定の baseHeight 見積もり」ではなく、DOM実測（getBoundingClientRect）で上UI/下UIの高さを取って、残りを盤面へ配分する方式が安定します。
- iOS Safari の viewport ゆらぎを避けるなら、スマホ時はラッパを position: fixed; inset:0; にして内部だけでレイアウトする方法でもOKです。
- transform: scale() を継続するなら、クリック判定/ハイライトは clientX/Y 直ではズレるため、必ず boardWrap.getBoundingClientRect() 基準で列判定 or scale補正してください。

【③ 仕様変更：残り時間の緑バー幅を盤面（中央フィールド）幅に合わせる（PC/スマホ両方）】
下部の残り時間を示す緑のバー（time bar / gauge）の横幅が、
中央の盤面（boardWrap あるいは盤面canvas領域）の横幅と一致するようにしてください。

要件（PC/スマホ共通）：
- 緑バーのコンテナ幅 = 盤面の見た目幅（boardWrap or board表示領域）
- 盤面が scale されるなら、その scale 後の見た目幅に追従すること
  （例：boardWrap の rect.width を使って time bar の width を合わせる等）

【追加で確認したいログ（もし可能なら）】
スマホ実機で以下を console.log して、何がボトルネックか特定してください：
- boardWrap.getBoundingClientRect() (width/height/top/left)
- left/right/center panel の rect
- calcFitScale() の最終 scale 値と、計算に使った vw/vh（innerHeight or visualViewport.height）
- time bar 要素の rect（盤面と一致しているか）
